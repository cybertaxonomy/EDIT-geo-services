<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
<a href='http://mapbuilder.sourceforge.net'>Community Map Builder</a> 22 Dec 2006 Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="MGRS.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b><a href='http://mapbuilder.sourceforge.net'>Community Map Builder</a> 22 Dec 2006</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>MGRS.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		No overview generated for 'MGRS.js'<BR/><BR/>
	
</p>

<hr>



<!-- ========== METHOD SUMMARY =========== -->

	<a name="method_summary"><!-- --></a>
	<table border="1" cellpadding="3" cellspacing="0" width="100%">
		<tr bgcolor="#CCCCFF" class="TableHeadingColor">
			<td colspan=2>
				<font size="+2">
					<b>Method Summary</b>
				</font>
			</td>
		</tr>
	
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#AsciiToNum">AsciiToNum</a></b>( ascii )
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#degToRad">degToRad</a></b>(deg)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#formatMGRS">formatMGRS</a></b>()
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#get100kID">get100kID</a></b>( easting, northing, zone_number)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 Get the two letter 100k designator for a given UTM easting,
 northing and zone number value.
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#get100kSetForZone">get100kSetForZone</a></b>(i)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 Given a UTM zone number, figure out the MGRS 100K set it is in.
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#getLetter100kID">getLetter100kID</a></b>( column, row, parm)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 Get the two-letter MGRS 100k designator given information
 translated from the UTM northing, easting and zone number.
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#getLetterDesignator">getLetterDesignator</a></b>(lat)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#LLtoUTM">LLtoUTM</a></b>()
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 Converts a set of Longitude and Latitude co-ordinates to UTM
 given an ellipsoid
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#MGRS">MGRS</a></b>()
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
		      </td>
		   </tr>
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;Object</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#NumToAscii">NumToAscii</a></b>( num )
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
		      </td>
		   </tr>
		
	
	</table>
    <p>

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/*
Author:       Patrice G. Cappelaere (Got library from Geoserver)
License:      LGPL as per: http://www.gnu.org/copyleft/lesser.html

$Id: MGRS.js 1775 2005-10-28 17:03:18 -0400 (Fri, 28 Oct 2005) cappelaere $
*/</span>


<span class="reserved">function</span> MGRS() {
	 <span class="comment">/**
     * UTM zones are grouped, and assigned to one of a group of 6
     * sets.
     */</span>
    var NUM_100K_SETS = 6;

    <span class="comment">/**
     * The column letters (for easting) of the lower left value, per
     * set.
     */</span>
    var SET_ORIGIN_COLUMN_LETTERS = new Array(<span class="literal">'A'</span>,<span class="literal">'J'</span>,<span class="literal">'S'</span>,<span class="literal">'A'</span>,<span class="literal">'J'</span>,<span class="literal">'S'</span>);

    <span class="comment">/**
     * The row letters (for northing) of the lower left value, per
     * set.
     */</span>
   var SET_ORIGIN_ROW_LETTERS = new Array(<span class="literal">'A'</span>,<span class="literal">'F'</span>,<span class="literal">'A'</span>,<span class="literal">'F'</span>,<span class="literal">'A'</span>,<span class="literal">'F'</span>);

    <span class="comment">/**
     * The column letters (for easting) of the lower left value, per
     * set,, for Bessel Ellipsoid.
     */</span>
    var BESSEL_SET_ORIGIN_COLUMN_LETTERS = new Array( <span class="literal">'A'</span>, <span class="literal">'J'</span>,  <span class="literal">'S'</span>, <span class="literal">'A'</span>, <span class="literal">'J'</span>, <span class="literal">'S'</span> );

    <span class="comment">/**
     * The row letters (for northing) of the lower left value, per
     * set, for Bessel Ellipsoid.
     */</span>
    var BESSEL_SET_ORIGIN_ROW_LETTERS = new Array( <span class="literal">'L'</span>, <span class="literal">'R'</span>, <span class="literal">'L'</span>, <span class="literal">'R'</span>, <span class="literal">'L'</span>, <span class="literal">'R'</span> );
    var SET_NORTHING_ROLLOVER = 20000000;

    <span class="comment">/**
     * Use 5 digits for northing and easting values, for 1 meter
     * accuracy of coordinate.
     */</span>

    var ACCURACY_1_METER = 5;

    <span class="comment">/**
     * Use 4 digits for northing and easting values, for 10 meter
     * accuracy of coordinate.
     */</span>
    var ACCURACY_10_METER = 4;

    <span class="comment">/**
     * Use 3 digits for northing and easting values, for 100 meter
     * accuracy of coordinate.
     */</span>
    var ACCURACY_100_METER = 3;

    <span class="comment">/**
     * Use 2 digits for northing and easting values, for 1000 meter
     * accuracy of coordinate.
     */</span>

    var ACCURACY_1000_METER = 2;
    <span class="comment">/**
     * Use 1 digits for northing and easting values, for 10000 meter
     * accuracy of coordinate.
     */</span>
    var ACCURACY_10000_METER = 1;

    <span class="comment">/** The set origin column letters to use. */</span>
    var originColumnLetters = SET_ORIGIN_COLUMN_LETTERS;

    <span class="comment">/** The set origin row letters to use. */</span>
    var originRowLetters = SET_ORIGIN_ROW_LETTERS;

    var A = 65;	//AsciiToNum(<span class="literal">'A'</span>);
    var I = 73;	//AsciiToNum(<span class="literal">'I'</span>);
    var O = 79;	//AsciiToNum(<span class="literal">'O'</span>);
    var V = 86;	//AsciiToNum(<span class="literal">'V'</span>);
    var Z = 90;	//AsciiToNum(<span class="literal">'Z'</span>);

    var DEBUG = false;

    <span class="comment">/** The String holding the MGRS coordinate value. */</span>
    var  mgrs_;
	  var lat_;
    var lon_;
    var radlat_ ;
    var radlon_ ;

 		var northing_;
    var easting_;
    var zone_number_;
    var zone_letter_;
    
		<span class="comment">/**
		  * Conversion of lat/lon to MGRS
		  */</span>
		<span class="reserved">this</span>.convert = <span class="reserved">function</span>(latitude, longitude) {
      lat_    = parseFloat(latitude);
		  lon_    = parseFloat(longitude);
		  radlat_ = degToRad(lat_);
      radlon_ = degToRad(lon_);

		  LLtoUTM();
		  <span class="reserved">return</span> formatMGRS();
	  }

    <span class="reserved">function</span> degToRad(deg) {
        <span class="reserved">return</span> (deg * (Math.PI / 180.0));
    }
    
	 <span class="comment">/**
     * Converts a set of Longitude and Latitude co-ordinates to UTM
     * given an ellipsoid
     * 
     * <span class="attrib">@param</span> ellip an ellipsoid definition.
     * <span class="attrib">@param</span> llpoint the coordinate to be converted
     * <span class="attrib">@param</span> utmpoint A UTMPoint instance to put the results in. If
     *        null, a new UTMPoint will be allocated.
     * <span class="attrib">@return</span> A UTM class instance containing the value of
     *         &lt;code&gt;null&lt;/code&gt; if conversion failed. If you pass
     *         in a UTMPoint, it will be returned as well if
     *         successful.
     */</span>
   <span class="reserved">function</span> LLtoUTM() {
        var Lat = lat_;
        var Long = lon_;
        var a = 6378137.0;	//ellip.radius;
        var eccSquared = 0.00669438;	//ellip.eccsq;
        var k0 = 0.9996;
        var LongOrigin;
        var eccPrimeSquared;
        var N, T, C, A, M;
        var LatRad = radlat_;
        var LongRad = radlon_;
        var LongOriginRad;
        var ZoneNumber;
<span class="comment">		// (int)</span>
        ZoneNumber = Math.floor((Long + 180) / 6) + 1;
<span class="comment">
        //Make sure the longitude 180.00 is in Zone 60</span>
        <span class="reserved">if</span> (Long == 180) {
            ZoneNumber = 60;
        }
<span class="comment">
        // Special zone for Norway</span>
        <span class="reserved">if</span> (Lat &gt;= 56.0 &amp;&amp; Lat &lt; 64.0 &amp;&amp; Long &gt;= 3.0 &amp;&amp; Long &lt; 12.0) {
            ZoneNumber = 32;
        }
<span class="comment">
        // Special zones for Svalbard</span>
        <span class="reserved">if</span> (Lat &gt;= 72.0 &amp;&amp; Lat &lt; 84.0) {
            <span class="reserved">if</span> (Long &gt;= 0.0 &amp;&amp; Long &lt; 9.0)
                ZoneNumber = 31;
            <span class="reserved">else</span> <span class="reserved">if</span> (Long &gt;= 9.0 &amp;&amp; Long &lt; 21.0)
                ZoneNumber = 33;
            <span class="reserved">else</span> <span class="reserved">if</span> (Long &gt;= 21.0 &amp;&amp; Long &lt; 33.0)
                ZoneNumber = 35;
            <span class="reserved">else</span> <span class="reserved">if</span> (Long &gt;= 33.0 &amp;&amp; Long &lt; 42.0)
                ZoneNumber = 37;
        }

        LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin
<span class="comment">                                                     // in middle of</span>
<span class="comment">                                                     // zone</span>
        LongOriginRad = degToRad(LongOrigin);

        eccPrimeSquared = (eccSquared) / (1 - eccSquared);

        N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));
        T = Math.tan(LatRad) * Math.tan(LatRad);
        C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);
        A = Math.cos(LatRad) * (LongRad - LongOriginRad);

        M = a
                * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5
                        * eccSquared * eccSquared * eccSquared / 256)
                        * LatRad
                        - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared
                                / 32 + 45 * eccSquared * eccSquared
                                * eccSquared / 1024)
                        * Math.sin(2 * LatRad)
                        + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared
                                * eccSquared * eccSquared / 1024)
                        * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared
                        * eccSquared / 3072)
                        * Math.sin(6 * LatRad));

        var UTMEasting = (k0
                * N
                * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T
                        + 72 * C - 58 * eccPrimeSquared)
                        * A * A * A * A * A / 120.0) + 500000.0);

        var UTMNorthing =  (k0 * (M + N
                * Math.tan(LatRad)
                * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A
                        / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared)
                        * A * A * A * A * A * A / 720.0)));
        <span class="reserved">if</span> (Lat &lt; 0.0) {
            UTMNorthing += 10000000.0; //10000000 meter offset <span class="reserved">for</span>
<span class="comment">                                        // southern hemisphere</span>
        }

        northing_ = Math.round(UTMNorthing);
        easting_ =  Math.round(UTMEasting);
        zone_number_ = ZoneNumber;
        zone_letter_ = getLetterDesignator(Lat);
    }
    
	<span class="reserved">function</span> getLetterDesignator(lat) {
<span class="comment">        //This is here as an error flag to show that the Latitude is</span>
<span class="comment">        //outside MGRS limits</span>
        var LetterDesignator = <span class="literal">'Z'</span>;

        <span class="reserved">if</span> ((84 &gt;= lat) &amp;&amp; (lat &gt;= 72))
            LetterDesignator = <span class="literal">'X'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((72 &gt; lat) &amp;&amp; (lat &gt;= 64))
            LetterDesignator = <span class="literal">'W'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((64 &gt; lat) &amp;&amp; (lat &gt;= 56))
            LetterDesignator = <span class="literal">'V'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((56 &gt; lat) &amp;&amp; (lat &gt;= 48))
            LetterDesignator = <span class="literal">'U'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((48 &gt; lat) &amp;&amp; (lat &gt;= 40))
            LetterDesignator = <span class="literal">'T'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((40 &gt; lat) &amp;&amp; (lat &gt;= 32))
            LetterDesignator = <span class="literal">'S'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((32 &gt; lat) &amp;&amp; (lat &gt;= 24))
            LetterDesignator = <span class="literal">'R'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((24 &gt; lat) &amp;&amp; (lat &gt;= 16))
            LetterDesignator = <span class="literal">'Q'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((16 &gt; lat) &amp;&amp; (lat &gt;= 8))
            LetterDesignator = <span class="literal">'P'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((8 &gt; lat) &amp;&amp; (lat &gt;= 0))
            LetterDesignator = <span class="literal">'N'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((0 &gt; lat) &amp;&amp; (lat &gt;= -8))
            LetterDesignator = <span class="literal">'M'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-8 &gt; lat) &amp;&amp; (lat &gt;= -16))
            LetterDesignator = <span class="literal">'L'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-16 &gt; lat) &amp;&amp; (lat &gt;= -24))
            LetterDesignator = <span class="literal">'K'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-24 &gt; lat) &amp;&amp; (lat &gt;= -32))
            LetterDesignator = <span class="literal">'J'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-32 &gt; lat) &amp;&amp; (lat &gt;= -40))
            LetterDesignator = <span class="literal">'H'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-40 &gt; lat) &amp;&amp; (lat &gt;= -48))
            LetterDesignator = <span class="literal">'G'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-48 &gt; lat) &amp;&amp; (lat &gt;= -56))
            LetterDesignator = <span class="literal">'F'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-56 &gt; lat) &amp;&amp; (lat &gt;= -64))
            LetterDesignator = <span class="literal">'E'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-64 &gt; lat) &amp;&amp; (lat &gt;= -72))
            LetterDesignator = <span class="literal">'D'</span>;
        <span class="reserved">else</span> <span class="reserved">if</span> ((-72 &gt; lat) &amp;&amp; (lat &gt;= -80))
            LetterDesignator = <span class="literal">'C'</span>;
        <span class="reserved">return</span> LetterDesignator;
    }

	 <span class="reserved">function</span> formatMGRS() {
		 var seasting = <span class="literal">""</span> + easting_;
		 var snorthing = <span class="literal">""</span>+ northing_;
		 <span class="reserved">while</span>( snorthing.length &gt; 6 )
			 snorthing = snorthing.substr(1,snorthing.length-1);

		 var str= zone_number_ + <span class="literal">""</span> + zone_letter_ +
       get100kID(easting_, northing_, zone_number_) +
			 seasting.substr(1,4) + snorthing.substr(1,4);

		  <span class="reserved">return</span> str;
	  }
	
	   <span class="comment">/**
     * Get the two letter 100k designator for a given UTM easting,
     * northing and zone number value.
     */</span>
    <span class="reserved">function</span> get100kID( easting, northing, zone_number) {
        var setParm = get100kSetForZone(zone_number);
        var setColumn = Math.floor( easting / 100000);
        var setRow = Math.floor( northing  / 100000) % 20;
<span class="comment">		//trace("get100kID:"+setParm+" "+setColumn+" "+setRow);</span>
        <span class="reserved">return</span> getLetter100kID(setColumn, setRow, setParm);
    }

	 <span class="comment">/**
     * Given a UTM zone number, figure out the MGRS 100K set it is in.
     */</span>
    <span class="reserved">function</span> get100kSetForZone(i) {
        var setParm = i % NUM_100K_SETS;
        <span class="reserved">if</span> (setParm == 0)
            setParm = NUM_100K_SETS;
		
        <span class="reserved">return</span> setParm;
    }
    
   <span class="comment">/**
     * Get the two-letter MGRS 100k designator given information
     * translated from the UTM northing, easting and zone number.
     * 
     * <span class="attrib">@param</span> setColumn the column index as it relates to the MGRS
     *        100k set spreadsheet, created from the UTM easting.
     *        Values are 1-8.
     * <span class="attrib">@param</span> setRow the row index as it relates to the MGRS 100k set
     *        spreadsheet, created from the UTM northing value. Values
     *        are from 0-19.
     * <span class="attrib">@param</span> setParm the set block, as it relates to the MGRS 100k set
     *        spreadsheet, created from the UTM zone. Values are from
     *        1-60.
     * <span class="attrib">@return</span> two letter MGRS 100k code.
     */</span>

    <span class="reserved">function</span> getLetter100kID( column, row, parm) {
<span class="comment">		    // colOrigin and rowOrigin are the letters at the origin of the set</span>
		    var index = parm-1;
        var colOrigin = AsciiToNum(SET_ORIGIN_COLUMN_LETTERS[index]);
        var rowOrigin = AsciiToNum(SET_ORIGIN_ROW_LETTERS[index]);
<span class="comment">
        // colInt and rowInt are the letters to build to return</span>
        var colInt = colOrigin + column - 1;
        var rowInt = rowOrigin + row;
        var rollover = false;

		    <span class="reserved">if</span> ( colInt &gt; Z ) {
            colInt = colInt - Z + A - 1;
            rollover = true;
        }

		    <span class="reserved">if</span> (colInt == I || (colOrigin &lt; I &amp;&amp; colInt &gt; I)
                || ((colInt &gt; I || colOrigin &lt; I) &amp;&amp; rollover)) {
            colInt++;
        }

		    <span class="reserved">if</span> (colInt == O || (colOrigin &lt; O &amp;&amp; colInt &gt; O)
                || ((colInt &gt; O || colOrigin &lt; O) &amp;&amp; rollover)) {
            colInt++;

            <span class="reserved">if</span> (colInt == I) {
                colInt++;
             }
        }

	  	   <span class="reserved">if</span> (colInt &gt; Z) {
            colInt = colInt - Z + A - 1;
        }

        <span class="reserved">if</span> (rowInt &gt; V) {
            rowInt = rowInt - V + A - 1;
            rollover = true;
        } <span class="reserved">else</span> {
            rollover = false;
        }

        <span class="reserved">if</span>( ((rowInt == I) || ((rowOrigin &lt; I) &amp;&amp; (rowInt &gt; I)))
                || (((rowInt &gt; I)||(rowOrigin &lt; I)) &amp;&amp; rollover)) {
            rowInt++;
        }

        <span class="reserved">if</span>( ((rowInt == O) || ((rowOrigin &lt; O) &amp;&amp; (rowInt &gt; O)))
                || (((rowInt &gt; O)|| (rowOrigin &lt; O)) &amp;&amp; rollover)) {
            rowInt++;

            <span class="reserved">if</span> (rowInt == I) {
                rowInt++;
            }
        }

        <span class="reserved">if</span> (rowInt &gt; V) {
            rowInt = rowInt - V + A - 1;
        }

        var twoLetter = NumToAscii(colInt) + <span class="literal">""</span> + NumToAscii(rowInt);
        <span class="reserved">return</span> twoLetter;
	}


	<span class="reserved">function</span> AsciiToNum( ascii ) {
		switch( ascii ) {
			case <span class="literal">'A'</span>:
				<span class="reserved">return</span> 65;
			case <span class="literal">'B'</span>:
				<span class="reserved">return</span> 66;
			case <span class="literal">'C'</span>:
				<span class="reserved">return</span> 67;
			case <span class="literal">'D'</span>:
				<span class="reserved">return</span> 68;
			case <span class="literal">'E'</span>:
				<span class="reserved">return</span> 69;
			case <span class="literal">'F'</span>:
				<span class="reserved">return</span> 70;
			case <span class="literal">'G'</span>:
				<span class="reserved">return</span> 71;
			case <span class="literal">'H'</span>:
				<span class="reserved">return</span> 72;
			case <span class="literal">'I'</span>:
				<span class="reserved">return</span> 73;
			case <span class="literal">'J'</span>:
				<span class="reserved">return</span> 74;
			case <span class="literal">'K'</span>:
				<span class="reserved">return</span> 75;
			case <span class="literal">'L'</span>:
				<span class="reserved">return</span> 76;
			case <span class="literal">'M'</span>:
				<span class="reserved">return</span> 77;
			case <span class="literal">'N'</span>:
				<span class="reserved">return</span> 78;
			case <span class="literal">'O'</span>:
				<span class="reserved">return</span> 79;
			case <span class="literal">'P'</span>:
				<span class="reserved">return</span> 80;
			case <span class="literal">'Q'</span>:
				<span class="reserved">return</span> 81;
			case <span class="literal">'R'</span>:
				<span class="reserved">return</span> 82;
			case <span class="literal">'S'</span>:
				<span class="reserved">return</span> 83;
			case <span class="literal">'T'</span>:
				<span class="reserved">return</span> 84;
			case <span class="literal">'U'</span>:
				<span class="reserved">return</span> 85;
			case <span class="literal">'V'</span>:
				<span class="reserved">return</span> 86;
			case <span class="literal">'W'</span>:
				<span class="reserved">return</span> 87;
			case <span class="literal">'X'</span>:
				<span class="reserved">return</span> 88;
			case <span class="literal">'Y'</span>:
				<span class="reserved">return</span> 89;
			case <span class="literal">'Z'</span>:
				<span class="reserved">return</span> 90;
		}
	}
	
	<span class="reserved">function</span> NumToAscii( num ) {
		switch( num ) {
			case 65:
				<span class="reserved">return</span> <span class="literal">'A'</span>;
			case 66:
				<span class="reserved">return</span> <span class="literal">'B'</span>;
			case 67:
				<span class="reserved">return</span> <span class="literal">'C'</span>;
			case 68:
				<span class="reserved">return</span> <span class="literal">'D'</span>;
			case 69:
				<span class="reserved">return</span> <span class="literal">'E'</span>;
			case 70:
				<span class="reserved">return</span> <span class="literal">'F'</span>;
			case 71:
				<span class="reserved">return</span> <span class="literal">'G'</span>;
			case 72:
				<span class="reserved">return</span> <span class="literal">'H'</span>;
			case 73:
				<span class="reserved">return</span> <span class="literal">'I'</span>;
			case 74:
				<span class="reserved">return</span>  <span class="literal">'J'</span>;
			case 75 :
				<span class="reserved">return</span> <span class="literal">'K'</span>;
			case 76:
				<span class="reserved">return</span> <span class="literal">'L'</span>;
			case 77:
				<span class="reserved">return</span> <span class="literal">'M'</span>;
			case 78:
				<span class="reserved">return</span> <span class="literal">'N'</span>;
			case 79:
				<span class="reserved">return</span> <span class="literal">'O'</span>;
			case 80:
				<span class="reserved">return</span> <span class="literal">'P'</span>;
			case 81:
				<span class="reserved">return</span> <span class="literal">'Q'</span>;
			case 82:
				<span class="reserved">return</span> <span class="literal">'R'</span>;
			case 83:
				<span class="reserved">return</span> <span class="literal">'S'</span>;
			case 84:
				<span class="reserved">return</span> <span class="literal">'T'</span>;
			case 85:
				<span class="reserved">return</span> <span class="literal">'U'</span>;
			case 86:
				<span class="reserved">return</span> <span class="literal">'V'</span>;
			case 87:
				<span class="reserved">return</span> <span class="literal">'W'</span>;
			case 88:
				<span class="reserved">return</span> <span class="literal">'X'</span>;
			case 89:
				<span class="reserved">return</span> <span class="literal">'Y'</span>;
			case 90:
				<span class="reserved">return</span> <span class="literal">'Z'</span>;
		}
	}
}</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b><a href='http://mapbuilder.sourceforge.net'>Community Map Builder</a> 22 Dec 2006</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Fri Dec 22 07:58:58 2006</div>
</body>
</html>
